<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEURAL_LINK // SYSTEM_DASHBOARD_V9</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --neon-green: #00ff41;
            --neon-cyan: #00ffff;
            --bg-dark: #050505;
            --panel-bg: rgba(10, 20, 10, 0.85);
            --grid-color: rgba(0, 255, 65, 0.1);
        }

        body {
            background-color: var(--bg-dark);
            color: var(--neon-green);
            font-family: 'Courier New', Courier, monospace;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        /* --- EFFECTS & ANIMATIONS --- */

        /* CRT Scanline Overlay */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.2) 50%,
                rgba(0,0,0,0.2)
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 50;
            opacity: 0.6;
        }

        /* Subtle Flicker */
        .flicker {
            animation: flickerAnimation 0.15s infinite;
        }
        @keyframes flickerAnimation {
            0% { opacity: 0.95; }
            50% { opacity: 1.0; }
            100% { opacity: 0.98; }
        }

        /* Neon Glow Text */
        .glow-text {
            text-shadow: 0 0 5px var(--neon-green), 0 0 10px var(--neon-green);
        }
        .glow-text-cyan {
            color: var(--neon-cyan);
            text-shadow: 0 0 5px var(--neon-cyan), 0 0 10px var(--neon-cyan);
        }

        /* Panel Borders */
        .cyber-panel {
            background-color: var(--panel-bg);
            border: 1px solid rgba(0, 255, 65, 0.3);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.1);
            position: relative;
            backdrop-filter: blur(4px);
            clip-path: polygon(
                0 15px,
                15px 0,
                100% 0,
                100% calc(100% - 15px),
                calc(100% - 15px) 100%,
                0 100%
            );
        }

        .cyber-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid transparent;
            /* Corner accents */
            background:
                linear-gradient(to right, var(--neon-green) 2px, transparent 2px) 0 0,
                linear-gradient(to bottom, var(--neon-green) 2px, transparent 2px) 0 0,
                linear-gradient(to left, var(--neon-green) 2px, transparent 2px) 100% 100%,
                linear-gradient(to top, var(--neon-green) 2px, transparent 2px) 100% 100%;
            background-repeat: no-repeat;
            background-size: 20px 20px;
            pointer-events: none;
            z-index: 2;
        }

        /* Hex Grid Background */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -1;
            transform: perspective(500px) rotateX(20deg) scale(1.5) translateY(-50px);
            opacity: 0.3;
        }

        /* Glitch Animation for Titles */
        .glitch-wrapper {
            position: relative;
            display: inline-block;
        }
        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
        }
        .glitch::before {
            left: 2px;
            text-shadow: -1px 0 #ff00c1;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim-1 5s infinite linear alternate-reverse;
        }
        .glitch::after {
            left: -2px;
            text-shadow: -1px 0 #00fff9;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim-2 5s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip: rect(20px, 9999px, 15px, 0); }
            20% { clip: rect(60px, 9999px, 80px, 0); }
            40% { clip: rect(30px, 9999px, 10px, 0); }
            60% { clip: rect(80px, 9999px, 50px, 0); }
            80% { clip: rect(10px, 9999px, 40px, 0); }
            100% { clip: rect(50px, 9999px, 30px, 0); }
        }
        @keyframes glitch-anim-2 {
            0% { clip: rect(10px, 9999px, 60px, 0); }
            20% { clip: rect(80px, 9999px, 10px, 0); }
            40% { clip: rect(20px, 9999px, 50px, 0); }
            60% { clip: rect(40px, 9999px, 20px, 0); }
            80% { clip: rect(60px, 9999px, 80px, 0); }
            100% { clip: rect(30px, 9999px, 40px, 0); }
        }

        /* Progress Bar Striped Animation */
        .progress-bar-striped {
            background-image: linear-gradient(
                45deg,
                rgba(0,0,0,0.5) 25%,
                transparent 25%,
                transparent 50%,
                rgba(0,0,0,0.5) 50%,
                rgba(0,0,0,0.5) 75%,
                transparent 75%,
                transparent
            );
            background-size: 20px 20px;
            animation: move-stripes 2s linear infinite;
        }
        @keyframes move-stripes {
            0% { background-position: 0 0; }
            100% { background-position: 40px 40px; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }
        ::-webkit-scrollbar-thumb {
            background: #00ff41;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #00cc33;
        }

        /* Hex Canvas */
        #hexCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            opacity: 0.4;
        }

        /* Node Canvas */
        #networkCanvas {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="selection:bg-green-500 selection:text-black">

    <!-- Scanline Overlay -->
    <div class="scanlines"></div>

    <!-- Background Grid -->
    <div class="bg-grid"></div>

    <!-- Hexadecimal Rain Canvas -->
    <canvas id="hexCanvas"></canvas>

    <!-- Main Container -->
    <div class="relative z-10 min-h-screen flex flex-col p-2 md:p-6 max-w-[1600px] mx-auto">

        <!-- Navbar -->
        <nav class="flex items-center justify-between cyber-panel px-6 py-4 mb-8">
            <div class="flex items-center gap-4">
                <!-- Hexagon Logo -->
                <div class="relative w-12 h-12 flex items-center justify-center">
                    <svg viewBox="0 0 100 100" class="w-full h-full fill-none stroke-[#00ff41] stroke-2 drop-shadow-[0_0_8px_rgba(0,255,65,0.8)]">
                        <polygon points="50 5, 95 27, 95 73, 50 95, 5 73, 5 27" />
                        <circle cx="50" cy="50" r="15" class="fill-[#00ff41] animate-pulse" />
                    </svg>
                </div>
                <div>
                    <h1 class="text-2xl font-bold tracking-wider glow-text">NET_RUNNER</h1>
                    <div class="text-xs text-cyan-400 tracking-[0.2em] opacity-80">SYS.ADMIN.01</div>
                </div>
            </div>

            <div class="hidden md:flex gap-8 text-sm tracking-widest">
                <a href="#" class="hover:text-cyan-400 hover:shadow-[0_0_10px_#00ffff] transition-all px-2 py-1">[DASHBOARD]</a>
                <a href="#" class="hover:text-cyan-400 hover:shadow-[0_0_10px_#00ffff] transition-all px-2 py-1 opacity-60">[NETWORK]</a>
                <a href="#" class="hover:text-cyan-400 hover:shadow-[0_0_10px_#00ffff] transition-all px-2 py-1 opacity-60">[SECURITY]</a>
                <a href="#" class="hover:text-cyan-400 hover:shadow-[0_0_10px_#00ffff] transition-all px-2 py-1 opacity-60">[LOGS]</a>
            </div>

            <div class="text-xs border border-green-500/50 px-3 py-1 bg-green-900/20">
                <span class="animate-pulse">●</span> ONLINE
            </div>
        </nav>

        <!-- Hero Status Bar -->
        <header class="mb-8 flex flex-col md:flex-row gap-6">
            <div class="flex-1 cyber-panel p-6 flex flex-col justify-center">
                <div class="text-xs text-gray-400 mb-1">SYSTEM_MESSAGE //</div>
                <h2 class="text-4xl md:text-5xl font-bold mb-2 glitch-wrapper">
                    <span class="glitch glow-text" data-text="WELCOME BACK, USER">WELCOME BACK, USER</span>
                </h2>
                <p class="text-cyan-400 text-sm mt-2 max-w-lg typing-effect">
                    > Secure connection established.<br>
                    > Node synchronization complete. All systems nominal.
                </p>
            </div>

            <div class="w-full md:w-64 cyber-panel p-4 flex flex-col justify-between shrink-0">
                <div class="flex justify-between items-end border-b border-green-500/30 pb-2 mb-2">
                    <span class="text-xs text-gray-400">SESSION_TIME</span>
                    <span class="text-xl font-bold font-mono" id="clock">00:00:00</span>
                </div>
                <div class="flex justify-between items-end">
                    <span class="text-xs text-gray-400">LATENCY</span>
                    <span class="text-xl font-bold text-cyan-400">24ms</span>
                </div>
                <div class="flex justify-between items-end mt-2">
                    <span class="text-xs text-gray-400">ENCRYPTION</span>
                    <span class="text-xs border border-green-500 px-1 text-green-500">AES-256</span>
                </div>
            </div>
        </header>

        <!-- Main Dashboard Grid -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1">

            <!-- Left Column: Metrics -->
            <div class="space-y-6 flex flex-col">
                <!-- Resource Monitor -->
                <div class="cyber-panel p-5 flex-1">
                    <div class="flex justify-between items-center mb-6 border-b border-green-500/30 pb-2">
                        <h3 class="text-lg glow-text-cyan">> RESOURCE_MONITOR</h3>
                        <div class="flex gap-1">
                            <div class="w-2 h-2 bg-green-500"></div>
                            <div class="w-2 h-2 bg-green-500 opacity-50"></div>
                            <div class="w-2 h-2 bg-green-500 opacity-20"></div>
                        </div>
                    </div>

                    <!-- CPU -->
                    <div class="mb-6 group">
                        <div class="flex justify-between text-sm mb-1">
                            <span>CPU_CORE_01</span>
                            <span class="text-cyan-400 font-bold" id="cpu-val">42%</span>
                        </div>
                        <div class="h-4 bg-gray-900 border border-green-900 relative overflow-hidden">
                            <div id="cpu-bar" class="h-full bg-green-500 shadow-[0_0_10px_#00ff41] w-[42%] progress-bar-striped transition-all duration-500"></div>
                        </div>
                    </div>

                    <!-- RAM -->
                    <div class="mb-6 group">
                        <div class="flex justify-between text-sm mb-1">
                            <span>MEMORY_ALLOC</span>
                            <span class="text-cyan-400 font-bold" id="ram-val">68%</span>
                        </div>
                        <div class="h-4 bg-gray-900 border border-green-900 relative overflow-hidden">
                            <div id="ram-bar" class="h-full bg-cyan-500 shadow-[0_0_10px_#00ffff] w-[68%] progress-bar-striped transition-all duration-700"></div>
                        </div>
                    </div>

                    <!-- GPU -->
                    <div class="mb-6 group">
                        <div class="flex justify-between text-sm mb-1">
                            <span>NEURAL_ENGINE</span>
                            <span class="text-pink-500 font-bold" id="gpu-val">89%</span>
                        </div>
                        <div class="h-4 bg-gray-900 border border-green-900 relative overflow-hidden">
                            <div id="gpu-bar" class="h-full bg-pink-500 shadow-[0_0_10px_#ff0055] w-[89%] progress-bar-striped transition-all duration-300"></div>
                        </div>
                    </div>

                    <!-- Circular Metrics -->
                    <div class="grid grid-cols-2 gap-4 mt-8">
                        <div class="text-center relative p-2 border border-green-500/20">
                            <div class="text-3xl font-bold text-cyan-400 mb-1" id="temp-val">45°C</div>
                            <div class="text-xs text-gray-500">CORE_TEMP</div>
                            <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-cyan-400"></div>
                            <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-cyan-400"></div>
                        </div>
                        <div class="text-center relative p-2 border border-green-500/20">
                            <div class="text-3xl font-bold text-green-400 mb-1" id="fan-val">2400</div>
                            <div class="text-xs text-gray-500">RPM_SPEED</div>
                            <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-green-400"></div>
                            <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-green-400"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Center Column: Network Vis -->
            <div class="cyber-panel p-0 relative overflow-hidden h-[400px] lg:h-auto group">
                <div class="absolute top-4 left-6 z-20 pointer-events-none">
                    <h3 class="text-lg glow-text-cyan bg-black/50 px-2 inline-block">> NETWORK_TOPOLOGY</h3>
                    <div class="text-xs text-green-500 mt-1">LIVE_MONITORING // ACTIVE</div>
                </div>
                <div class="absolute top-4 right-6 z-20 flex flex-col items-end gap-2 text-[10px] text-gray-400">
                    <div>NODES: <span class="text-white">14</span></div>
                    <div>PKT_LOSS: <span class="text-white">0.02%</span></div>
                </div>

                <!-- Canvas for Network Nodes -->
                <canvas id="networkCanvas"></canvas>

                <!-- Grid Overlay on Canvas -->
                <div class="absolute inset-0 bg-[linear-gradient(rgba(0,255,65,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(0,255,65,0.03)_1px,transparent_1px)] bg-[size:20px_20px] pointer-events-none"></div>

                <!-- Bottom Status in Vis -->
                <div class="absolute bottom-0 left-0 w-full p-2 bg-black/80 border-t border-green-500/30 flex justify-between text-xs">
                    <span class="animate-pulse text-cyan-400">SCANNING_SECTOR_7G...</span>
                    <span>COORD: 45.33.91.00</span>
                </div>
            </div>

            <!-- Right Column: Activity Log & Commands -->
            <div class="space-y-6 flex flex-col">

                <!-- Activity Feed -->
                <div class="cyber-panel p-5 flex flex-col h-full max-h-[500px]">
                    <div class="flex justify-between items-center mb-4 border-b border-green-500/30 pb-2">
                        <h3 class="text-lg glow-text-cyan">> ACTIVITY_LOG</h3>
                        <span class="text-xs animate-pulse text-green-500">REC ●</span>
                    </div>

                    <div class="flex-1 overflow-y-auto pr-2 font-mono text-xs space-y-3" id="activity-log">
                        <!-- JS will populate this -->
                        <div class="opacity-50 border-l-2 border-green-900 pl-2">
                            <span class="text-cyan-600">[10:42:01]</span> System initialized.
                        </div>
                        <div class="border-l-2 border-green-500 pl-2">
                            <span class="text-cyan-400">[10:42:05]</span> Auth token verified.
                        </div>
                        <div class="border-l-2 border-green-500 pl-2">
                            <span class="text-cyan-400">[10:42:08]</span> Uplink established (Speed: 1.2GB/s).
                        </div>
                    </div>
                </div>

                <!-- Quick Actions / Upload -->
                <div class="cyber-panel p-5">
                    <h3 class="text-sm text-gray-400 mb-3 uppercase tracking-wider">Manual Override</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button class="border border-green-500 text-green-500 hover:bg-green-500 hover:text-black py-2 px-4 text-xs font-bold transition-all uppercase skew-x-[-10deg]">
                            <span class="skew-x-[10deg] inline-block">Purge Cache</span>
                        </button>
                        <button class="border border-cyan-500 text-cyan-500 hover:bg-cyan-500 hover:text-black py-2 px-4 text-xs font-bold transition-all uppercase skew-x-[-10deg]">
                            <span class="skew-x-[10deg] inline-block">Reboot Node</span>
                        </button>
                        <button class="col-span-2 border border-red-500 text-red-500 hover:bg-red-500 hover:text-black py-2 px-4 text-xs font-bold transition-all uppercase skew-x-[-10deg] group relative overflow-hidden">
                            <span class="skew-x-[10deg] inline-block relative z-10">INITIATE LOCKDOWN</span>
                            <div class="absolute inset-0 bg-red-500/20 translate-y-full group-hover:translate-y-0 transition-transform skew-x-[10deg]"></div>
                        </button>
                    </div>
                </div>

            </div>
        </main>

        <!-- Footer -->
        <footer class="mt-8 border-t border-green-500/20 pt-4 flex flex-col md:flex-row justify-between items-center text-xs text-gray-500">
            <div>
                CYBER_DASH // v9.2.1 // <span class="text-green-800">UNAUTHORIZED ACCESS IS PROHIBITED</span>
            </div>
            <div class="flex gap-4 mt-2 md:mt-0 font-mono">
                <span>MEM: 124TB</span>
                <span>UP: 99.99%</span>
                <span>PING: 12ms</span>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script>
        // --- 1. Clock Functionality ---
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { hour12: false });
            document.getElementById('clock').textContent = timeString;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- 2. Random Metrics Updater ---
        function updateMetrics() {
            const cpu = Math.floor(Math.random() * (60 - 30) + 30);
            const ram = Math.floor(Math.random() * (80 - 40) + 40);
            const gpu = Math.floor(Math.random() * (95 - 60) + 60);
            const temp = Math.floor(Math.random() * (75 - 40) + 40);
            const fan = Math.floor(Math.random() * (3500 - 1800) + 1800);

            document.getElementById('cpu-val').innerText = cpu + '%';
            document.getElementById('cpu-bar').style.width = cpu + '%';

            document.getElementById('ram-val').innerText = ram + '%';
            document.getElementById('ram-bar').style.width = ram + '%';

            document.getElementById('gpu-val').innerText = gpu + '%';
            document.getElementById('gpu-bar').style.width = gpu + '%';

            document.getElementById('temp-val').innerText = temp + '°C';
            document.getElementById('fan-val').innerText = fan;
        }
        setInterval(updateMetrics, 2000);

        // --- 3. Activity Log Feed ---
        const logs = [
            "Scanning port 8080...",
            "Packet intercepted from Sector 4.",
            "Encryption key rotated.",
            "Database backup complete.",
            "Firewall blocked intrusion attempt.",
            "Neural link synchronized.",
            "Optimizing sub-routines...",
            "Checking integrity of data cluster.",
            "Warning: High latency in node 7."
        ];

        const logContainer = document.getElementById('activity-log');

        function addLog() {
            const msg = logs[Math.floor(Math.random() * logs.length)];
            const now = new Date().toLocaleTimeString('en-US', { hour12: false });
            const div = document.createElement('div');

            // Randomly style warnings
            let colorClass = "text-cyan-400";
            let borderClass = "border-green-500";
            if (msg.includes("Warning") || msg.includes("intrusion")) {
                colorClass = "text-red-400";
                borderClass = "border-red-500";
            }

            div.className = `border-l-2 ${borderClass} pl-2 animate-pulse`;
            div.innerHTML = `<span class="${colorClass}">[${now}]</span> ${msg}`;

            logContainer.prepend(div);

            if (logContainer.children.length > 8) {
                logContainer.lastElementChild.remove();
            }
        }
        setInterval(addLog, 2500);

        // --- 4. Background Hex Stream (Canvas) ---
        const hexCanvas = document.getElementById('hexCanvas');
        const hexCtx = hexCanvas.getContext('2d');

        let hexWidth, hexHeight;

        function resizeHexCanvas() {
            hexWidth = window.innerWidth;
            hexHeight = window.innerHeight;
            hexCanvas.width = hexWidth;
            hexCanvas.height = hexHeight;
        }
        window.addEventListener('resize', resizeHexCanvas);
        resizeHexCanvas();

        const hexChars = "0123456789ABCDEF";
        const hexDrops = [];
        const columns = Math.floor(window.innerWidth / 20);

        for(let i = 0; i < columns; i++) {
            hexDrops[i] = {
                x: i * 20,
                y: Math.random() * hexHeight,
                speed: Math.random() * 2 + 0.5,
                value: "0x" + hexChars[Math.floor(Math.random()*16)] + hexChars[Math.floor(Math.random()*16)]
            };
        }

        function drawHex() {
            hexCtx.fillStyle = "rgba(5, 5, 5, 0.1)"; // Fade effect
            hexCtx.fillRect(0, 0, hexWidth, hexHeight);

            hexCtx.font = "12px 'Courier New'";

            for(let i = 0; i < hexDrops.length; i++) {
                const drop = hexDrops[i];

                // Random color variation
                if(Math.random() > 0.95) hexCtx.fillStyle = "#fff";
                else hexCtx.fillStyle = "#003300"; // Dark green inactive

                // Occasional active hex
                if(Math.random() > 0.98) {
                   hexCtx.fillStyle = "#00ff41";
                   drop.value = "0x" + hexChars[Math.floor(Math.random()*16)] + hexChars[Math.floor(Math.random()*16)];
                }

                hexCtx.fillText(drop.value, drop.x, drop.y);

                drop.y += drop.speed;

                if(drop.y > hexHeight) {
                    drop.y = 0 - Math.random() * 50;
                    drop.speed = Math.random() * 2 + 0.5;
                }
            }
            requestAnimationFrame(drawHex);
        }
        drawHex();

        // --- 5. Network Visualization (Canvas) ---
        const netCanvas = document.getElementById('networkCanvas');
        const netCtx = netCanvas.getContext('2d');
        let netW, netH;
        let nodes = [];

        function resizeNetCanvas() {
            const parent = netCanvas.parentElement;
            netW = parent.clientWidth;
            netH = parent.clientHeight || 400;
            netCanvas.width = netW;
            netCanvas.height = netH;
        }
        // Resize observer for the panel
        new ResizeObserver(resizeNetCanvas).observe(netCanvas.parentElement);

        class Node {
            constructor() {
                this.x = Math.random() * netW;
                this.y = Math.random() * netH;
                this.vx = (Math.random() - 0.5) * 1.5;
                this.vy = (Math.random() - 0.5) * 1.5;
                this.size = Math.random() * 2 + 2;
                this.isHub = Math.random() > 0.8;
                if(this.isHub) this.size += 2;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;

                if (this.x < 0 || this.x > netW) this.vx *= -1;
                if (this.y < 0 || this.y > netH) this.vy *= -1;
            }
            draw() {
                netCtx.beginPath();
                netCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                netCtx.fillStyle = this.isHub ? '#00ffff' : '#00ff41';
                netCtx.shadowBlur = 10;
                netCtx.shadowColor = this.isHub ? '#00ffff' : '#00ff41';
                netCtx.fill();
                netCtx.shadowBlur = 0;
            }
        }

        // Init nodes
        for(let i=0; i<15; i++) nodes.push(new Node());

        function drawNetwork() {
            // Clear but leave trail
            netCtx.fillStyle = 'rgba(5, 5, 5, 0.2)';
            netCtx.fillRect(0, 0, netW, netH);

            // Draw connections
            netCtx.strokeStyle = 'rgba(0, 255, 65, 0.15)';
            netCtx.lineWidth = 1;

            for(let i=0; i<nodes.length; i++) {
                for(let j=i+1; j<nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const dist = Math.sqrt(dx*dx + dy*dy);

                    if(dist < 100) {
                        netCtx.beginPath();
                        netCtx.moveTo(nodes[i].x, nodes[i].y);
                        netCtx.lineTo(nodes[j].x, nodes[j].y);
                        netCtx.stroke();

                        // Data packet animation
                        if (Math.random() > 0.95) {
                            const t = Math.random();
                            const px = nodes[i].x + (nodes[j].x - nodes[i].x) * t;
                            const py = nodes[i].y + (nodes[j].y - nodes[i].y) * t;
                            netCtx.fillStyle = '#fff';
                            netCtx.fillRect(px, py, 2, 2);
                        }
                    }
                }
            }

            nodes.forEach(node => {
                node.update();
                node.draw();
            });

            requestAnimationFrame(drawNetwork);
        }

        // Wait for layout to settle before starting viz
        setTimeout(() => {
            resizeNetCanvas();
            drawNetwork();
        }, 100);

    </script>
</body>
</html>