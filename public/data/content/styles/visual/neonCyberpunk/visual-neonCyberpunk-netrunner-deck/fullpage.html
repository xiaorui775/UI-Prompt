<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetRunner Operations Deck</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Share+Tech+Mono&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="fullpage.css">
</head>
<body class="screen-flicker">

    <!-- FX Layers -->
    <div class="scanlines"></div>
    <div class="vignette"></div>
    <canvas id="matrixCanvas" class="fixed top-0 left-0 w-full h-full opacity-10 -z-10"></canvas>

    <!-- Header -->
    <header class="fixed top-0 w-full h-14 bg-black/90 border-b border-green-900 z-40 flex items-center justify-between px-6 backdrop-blur-sm">
        <div class="flex items-center gap-4">
            <div class="text-2xl font-bold font-[Share_Tech_Mono] neon-text glitch-hover cursor-pointer tracking-widest">
                NETRUNNER<span class="text-xs align-top opacity-70">v9.2</span>
            </div>
            <div class="h-6 w-[1px] bg-green-900 mx-2"></div>
            <nav class="hidden md:flex gap-6 text-sm">
                <a href="#" class="hover:text-[var(--color-secondary)] transition-colors opacity-70 hover:opacity-100">[DASHBOARD]</a>
                <a href="#" class="hover:text-[var(--color-secondary)] transition-colors opacity-70 hover:opacity-100">[SYSTEMS]</a>
                <a href="#" class="hover:text-[var(--color-secondary)] transition-colors opacity-70 hover:opacity-100">[NETWORK]</a>
                <a href="#" class="hover:text-[var(--color-secondary)] transition-colors opacity-70 hover:opacity-100">[SECURITY]</a>
            </nav>
        </div>

        <div class="flex items-center gap-6 font-[Share_Tech_Mono]">
            <div class="flex flex-col items-end leading-tight">
                <span id="clock" class="text-lg neon-text">00:00:00</span>
                <span id="date" class="text-xs text-green-700">YYYY-MM-DD</span>
            </div>
            <div class="border border-green-900 px-3 py-1 flex items-center gap-2">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_5px_#0f0]"></div>
                <span class="text-xs tracking-widest">CONNECTED</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-grid">

        <!-- LEFT COLUMN: System Stats & Quick Actions -->
        <aside class="sidebar-left flex flex-col gap-4">
            <!-- CPU/RAM Panel -->
            <div class="panel p-4 flex flex-col gap-4">
                <h3 class="text-xs font-bold uppercase tracking-widest border-b border-green-900 pb-2 mb-1 text-gray-400">System Resources</h3>

                <!-- CPU -->
                <div class="space-y-1">
                    <div class="flex justify-between text-xs">
                        <span>CPU_CORE_01</span>
                        <span id="cpuVal" class="text-[var(--color-secondary)]">45%</span>
                    </div>
                    <div class="bar-container border border-green-900">
                        <div id="cpuBar" class="bar-fill" style="width: 45%;"></div>
                    </div>
                </div>

                <!-- RAM -->
                <div class="space-y-1">
                    <div class="flex justify-between text-xs">
                        <span>DDR4_MEM</span>
                        <span id="ramVal" class="text-[var(--color-secondary)]">32%</span>
                    </div>
                    <div class="bar-container border border-green-900">
                        <div id="ramBar" class="bar-fill" style="width: 32%;"></div>
                    </div>
                </div>

                <!-- TEMP -->
                <div class="mt-2 grid grid-cols-2 gap-2">
                    <div class="bg-green-900/10 p-2 border border-green-900/50 text-center">
                        <div class="text-[10px] text-gray-500">GPU TEMP</div>
                        <div class="text-lg font-[Share_Tech_Mono]">62°C</div>
                    </div>
                    <div class="bg-green-900/10 p-2 border border-green-900/50 text-center">
                        <div class="text-[10px] text-gray-500">FAN SPD</div>
                        <div class="text-lg font-[Share_Tech_Mono]">1200</div>
                    </div>
                </div>
            </div>

            <!-- Active Tasks -->
            <div class="panel p-4 flex-grow">
                <h3 class="text-xs font-bold uppercase tracking-widest border-b border-green-900 pb-2 mb-3 text-gray-400">Mission Objectives</h3>
                <ul class="space-y-3 text-sm" id="taskList">
                    <!-- Tasks injected by JS -->
                </ul>
                <div class="mt-4 flex gap-2">
                    <input type="text" placeholder="Add Protocol..." class="bg-black border border-green-800 text-green-500 text-xs p-2 w-full focus:outline-none focus:border-green-500 font-mono placeholder-green-900">
                    <button class="btn-cyber px-3 text-xs">+</button>
                </div>
            </div>
        </aside>

        <!-- CENTER COLUMN: Main Terminal & Network Vis -->
        <section class="flex flex-col gap-4 h-full relative">
            <!-- Terminal Window -->
            <div class="panel flex-grow flex flex-col overflow-hidden h-2/3">
                <div class="bg-green-900/20 p-2 border-b border-green-800 flex justify-between items-center">
                    <span class="text-xs font-bold tracking-widest">>> TERMINAL_OUTPUT.sh</span>
                    <div class="flex gap-1">
                        <div class="w-3 h-3 border border-green-700"></div>
                        <div class="w-3 h-3 border border-green-700"></div>
                        <div class="w-3 h-3 bg-green-700"></div>
                    </div>
                </div>
                <div class="p-4 font-mono text-sm overflow-y-auto flex-grow scroll-smooth" id="terminal-content">
                    <div class="text-green-700 mb-2">Initialize NetRunner v9.2...</div>
                    <div class="text-green-600 mb-2">Loading core modules... OK</div>
                    <div class="text-green-500 mb-2">Mounting file system... OK</div>
                    <div class="text-green-500 mb-2">Establishing secure handshake...</div>
                    <!-- JS will append here -->
                </div>
            </div>

            <!-- Visualizer / Graph Placeholder -->
            <div class="panel h-1/3 p-4 flex flex-col relative overflow-hidden">
                <h3 class="text-xs font-bold uppercase tracking-widest text-gray-400 absolute z-10">Network Traffic</h3>
                <canvas id="networkCanvas" class="w-full h-full mt-2"></canvas>
                <div class="absolute bottom-2 right-2 text-[10px] text-green-700">
                    PACKET_LOSS: 0.002%
                </div>
            </div>
        </section>

        <!-- RIGHT COLUMN: Environment & Logs -->
        <aside class="sidebar-right flex flex-col gap-4">
            <!-- Environment Control -->
            <div class="panel p-4">
                <h3 class="text-xs font-bold uppercase tracking-widest border-b border-green-900 pb-2 mb-3 text-gray-400">Environment</h3>

                <div class="space-y-4">
                    <!-- Music Player Mockup -->
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-[10px]">AUDIO_STREAM</span>
                            <span class="text-[10px] text-[var(--color-secondary)]">PLAYING</span>
                        </div>
                        <div class="border border-green-900 p-2 bg-black">
                            <div class="text-xs truncate text-[var(--color-secondary)]">Synthwave_Mix_Vol4.mp3</div>
                            <div class="flex justify-between items-center mt-2">
                                <button class="text-xs hover:text-white">|&lt;</button>
                                <button class="text-xs hover:text-white">||</button>
                                <button class="text-xs hover:text-white">&gt;|</button>
                                <div class="w-16 h-1 bg-green-900">
                                    <div class="w-1/2 h-full bg-[var(--color-secondary)]"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Light Control Mockup -->
                    <div>
                        <div class="text-[10px] mb-1">LIGHTING_ARRAY</div>
                        <div class="flex gap-2">
                            <button class="btn-cyber flex-1 py-1 text-[10px] bg-green-900/20">LOW</button>
                            <button class="btn-cyber flex-1 py-1 text-[10px]">MED</button>
                            <button class="btn-cyber flex-1 py-1 text-[10px] border-red-900 text-red-500 hover:bg-red-900">ALERT</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Log -->
            <div class="panel p-4 flex-grow flex flex-col">
                <h3 class="text-xs font-bold uppercase tracking-widest border-b border-green-900 pb-2 mb-2 text-gray-400 flex justify-between">
                    <span>Security Feed</span>
                    <span class="text-[var(--color-alert)] animate-pulse">● REC</span>
                </h3>
                <div class="overflow-hidden relative flex-grow">
                    <div id="securityLog" class="text-[10px] font-mono space-y-1 h-full overflow-hidden">
                        <!-- JS populated -->
                    </div>
                    <div class="absolute bottom-0 w-full h-8 bg-gradient-to-t from-black to-transparent"></div>
                </div>
            </div>
        </aside>

    </main>

    <!-- Footer -->
    <footer class="fixed bottom-0 w-full h-8 bg-black border-t border-green-900 z-40 flex items-center text-xs font-[Share_Tech_Mono]">
        <div class="px-4 bg-green-900 text-black font-bold h-full flex items-center">
            SYS_STATUS: NORMAL
        </div>
        <div class="flex-grow overflow-hidden relative mx-4">
            <div class="whitespace-nowrap animate-[marquee_20s_linear_infinite] text-green-700">
                /root/usr/daemon_active [PID: 4022] // Monitoring Port 8080 // Firewall Integrity: 98% // Intrusion Detection System: IDLE // Weather: Acid Rain Warning in Sector 7 // Stocks: ARASAKA +2.4% //
            </div>
        </div>
        <div class="px-4 border-l border-green-900 h-full flex items-center gap-2">
            <span class="opacity-50">IP: 192.168.0.X</span>
        </div>
    </footer>

    <script>
        // --- 1. CLOCK & DATE ---
        function updateTime() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('en-US', { hour12: false });
            document.getElementById('date').innerText = now.toISOString().split('T')[0];

            // Random fluctuations in resource bars
            if(Math.random() > 0.5) {
                const cpu = 30 + Math.floor(Math.random() * 40);
                const ram = 20 + Math.floor(Math.random() * 30);
                document.getElementById('cpuVal').innerText = cpu + '%';
                document.getElementById('cpuBar').style.width = cpu + '%';

                // Color change on high load
                if(cpu > 60) {
                    document.getElementById('cpuBar').style.backgroundColor = 'var(--color-alert)';
                    document.getElementById('cpuBar').style.boxShadow = '0 0 5px var(--color-alert)';
                } else {
                    document.getElementById('cpuBar').style.backgroundColor = 'var(--color-primary)';
                    document.getElementById('cpuBar').style.boxShadow = '0 0 5px var(--color-primary)';
                }

                document.getElementById('ramVal').innerText = ram + '%';
                document.getElementById('ramBar').style.width = ram + '%';
            }
        }
        setInterval(updateTime, 1000);
        updateTime();

        // --- 2. MATRIX RAIN BACKGROUND ---
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const katakana = 'アァカサタナハマヤャラワガザダバパイィキシチニヒミリヂビピウゥクスツヌフムユュルグズブヅプエェケセテネヘメレゲゼデベペオォコソトノホモヨョロヲゴゾドボポヴッン';
        const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        const nums = '0123456789';
        const alphabet = katakana + latin + nums;

        const fontSize = 16;
        const columns = canvas.width/fontSize;

        const rainDrops = [];
        for( let x = 0; x < columns; x++ ) {
            rainDrops[x] = 1;
        }

        const drawMatrix = () => {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#0F0';
            ctx.font = fontSize + 'px monospace';

            for(let i = 0; i < rainDrops.length; i++) {
                const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
                ctx.fillText(text, i*fontSize, rainDrops[i]*fontSize);

                if(rainDrops[i]*fontSize > canvas.height && Math.random() > 0.975){
                    rainDrops[i] = 0;
                }
                rainDrops[i]++;
            }
        };
        setInterval(drawMatrix, 50);

        window.addEventListener('resize', () => {
             canvas.width = window.innerWidth;
             canvas.height = window.innerHeight;
        });

        // --- 3. TERMINAL LOGIC ---
        const terminal = document.getElementById('terminal-content');
        const commands = [
            "Scanning ports...",
            "Decrypting data packet 0x4F...",
            "Ping 127.0.0.1: 2ms",
            "Checking drive integrity...",
            "User 'Ghost' connected via SSH",
            "Updating firewall rules...",
            "Downloading patch v4.0.1...",
            "Daemon started: PID 4590",
            "Warning: Spike in thermal sensor 2",
            "Analyzing network traffic..."
        ];

        function addLog() {
            const line = document.createElement('div');
            line.classList.add('mb-1');

            // Randomly color code logs
            const rand = Math.random();
            if (rand > 0.9) {
                line.classList.add('text-[var(--color-alert)]');
                line.innerText = "[ALERT] " + commands[Math.floor(Math.random() * commands.length)];
            } else if (rand > 0.7) {
                 line.classList.add('text-[var(--color-secondary)]');
                 line.innerText = "[INFO] " + commands[Math.floor(Math.random() * commands.length)];
            } else {
                line.innerText = "> " + commands[Math.floor(Math.random() * commands.length)];
            }

            terminal.appendChild(line);

            // Keep only last 50 lines
            if(terminal.children.length > 50) {
                terminal.removeChild(terminal.firstChild);
            }

            terminal.scrollTop = terminal.scrollHeight;
        }

        // Add log at random intervals
        setInterval(() => {
            if(Math.random() > 0.6) addLog();
        }, 800);


        // --- 4. NETWORK CANVAS VISUALIZATION ---
        const netCanvas = document.getElementById('networkCanvas');
        const netCtx = netCanvas.getContext('2d');
        let width, height;

        function resizeNetCanvas() {
            const parent = netCanvas.parentElement;
            netCanvas.width = parent.clientWidth;
            netCanvas.height = parent.clientHeight;
            width = netCanvas.width;
            height = netCanvas.height;
        }
        window.addEventListener('resize', resizeNetCanvas);
        resizeNetCanvas();

        const points = [];
        for(let i=0; i<20; i++) {
            points.push({
                x: Math.random() * 500,
                y: Math.random() * 200,
                vx: (Math.random() - 0.5) * 2,
                vy: (Math.random() - 0.5) * 2
            });
        }

        function drawNet() {
            netCtx.clearRect(0, 0, width, height);

            // Update and draw points
            netCtx.fillStyle = '#0ff';
            netCtx.strokeStyle = 'rgba(0, 255, 65, 0.2)';

            points.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;

                // Bounce
                if(p.x < 0 || p.x > width) p.vx *= -1;
                if(p.y < 0 || p.y > height) p.vy *= -1;

                netCtx.beginPath();
                netCtx.arc(p.x, p.y, 2, 0, Math.PI*2);
                netCtx.fill();
            });

            // Draw connections
            netCtx.beginPath();
            for(let i=0; i<points.length; i++) {
                for(let j=i+1; j<points.length; j++) {
                    const dx = points[i].x - points[j].x;
                    const dy = points[i].y - points[j].y;
                    const dist = Math.sqrt(dx*dx + dy*dy);

                    if(dist < 100) {
                        netCtx.moveTo(points[i].x, points[i].y);
                        netCtx.lineTo(points[j].x, points[j].y);
                    }
                }
            }
            netCtx.stroke();

            requestAnimationFrame(drawNet);
        }
        drawNet();

        // --- 5. TASKS & SECURITY FEED MOCKUP ---
        const tasks = [
            { text: "Debug Kernel module", done: false },
            { text: "Review server logs", done: true },
            { text: "Update security certs", done: false },
            { text: "Email HQ", done: false }
        ];

        const taskList = document.getElementById('taskList');
        tasks.forEach(t => {
            const li = document.createElement('li');
            li.className = "flex items-center gap-2 group cursor-pointer";
            li.innerHTML = `
                <div class="w-3 h-3 border border-green-500 ${t.done ? 'bg-green-500' : ''} group-hover:bg-green-500 transition-colors"></div>
                <span class="${t.done ? 'line-through opacity-50' : 'group-hover:text-white'}">${t.text}</span>
            `;
            taskList.appendChild(li);
        });

        const securityLog = document.getElementById('securityLog');
        const secEvents = [
            "Camera 01: MOTION DETECTED",
            "Auth Server: Login attempt failed",
            "Firewall: Blocked IP 89.102.XX.XX",
            "Door 4: Locked",
            "System: Backup complete",
            "Camera 04: Signal Lost",
            "Power: Grid stable"
        ];

        setInterval(() => {
            const div = document.createElement('div');
            const event = secEvents[Math.floor(Math.random() * secEvents.length)];
            const time = new Date().toLocaleTimeString('en-US', {hour12:false});
            div.innerHTML = `<span class="opacity-50">[${time}]</span> ${event}`;
            if(event.includes("DETECTED") || event.includes("failed")) div.classList.add("text-red-500");

            securityLog.prepend(div);
            if(securityLog.children.length > 8) securityLog.lastElementChild.remove();
        }, 2500);

    </script>
</body>
</html>
